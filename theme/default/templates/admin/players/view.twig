{% extends 'admin/admin.twig' %}

{% import 'macros/admin.twig' as admin %}
{% import 'macros/punishments.twig' as punishments %}

{#{% block title %}{{ parent() }} | {{ trans('admin_menu', 'players') }} | {{ player.name }}{% endblock %}#}

{% block style %}
    <link rel="stylesheet" href="{{ base_url() }}/assets/css/tables.css" />
{% endblock %}

{% block subnav %}
    {% if has_access_permission(
        constants.admin.players.PERMISSION_GROUP,
        constants.admin.players.PERMISSION_KEY,
        permissions.ACCESS_LIST
        ) %}
        <div class="uk-float-left">
            {{ admin.back_btn(path_for(constants.admin.players.ROUTE_LIST), 'l') }}
        </div>
    {% endif %}

    {% if has_access_permission(
        constants.admin.players.PERMISSION_GROUP,
        constants.admin.players.PERMISSION_KEY,
        permissions.ACCESS_EDIT
        ) %}
        {{ admin.edit_btn(path_for(constants.admin.players.ROUTE_EDIT, {'player': players.id}), 'l') }}
    {% endif %}

    {% if has_access_permission(
        constants.admin.players.PERMISSION_GROUP,
        constants.admin.players.PERMISSION_KEY,
        permissions.ACCESS_DELETE
        ) %}
        {{ admin.delete_btn(path_for(constants.admin.players.ROUTE_DELETE, {'player': players.id}), 'l') }}
    {% endif %}
{% endblock %}

{% block content %}
<div class="uk-card uk-card-default uk-card-body uk-width-1-1@m">
    <div class="uk-card uk-card-secondary uk-grid-collapse uk-child-width-1-2@s uk-margin" uk-grid>
        <div>
            <div class="uk-card-body">
                <h3 class="uk-card-title">{{ player.nick }}</h3>
                <div f-table f-divider>
                    <ul>
                        <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">Emulator</li>
                        <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">{{ player.emulator }}</li>
                    </ul>
                    <ul>
                        <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">STEAM_ID</li>
                        <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">{{ player.steamid }}</li>
                    </ul>
                    <ul>
                        <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">IP</li>
                        <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">{{ player.ip }}</li>
                    </ul>
                    {% if has_access_permission(
                        constants.admin.users.PERMISSION_GROUP,
                        constants.admin.users.PERMISSION_KEY,
                        premissions.ACCESS_VIEW
                    ) %}
                        <ul>
                            <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">User</li>
                            <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">
                            {% if player.user_id %}
                                <a href="{{ path_for(constants.admin.users.ROUTE_VIEW, {'user': player.user.id}) }}">
                                    {{ player.user.login }}
                                </a>
                            {% else %}
                                -
                            {% endif %}
                            </li>
                        </ul>
                    {% endif %}
                    <ul>
                        <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">Create At</li>
                        <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">{{ player.created_at }}</li>
                    </ul>
                    <ul>
                        <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">Update At</li>
                        <li class="uk-width-1-2@m uk-width-1-2@s uk-visible@s">{{ player.updated_at }}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="uk-card uk-card-secondary uk-card-body uk-width-1-1@m">
    <div f-table f-divider>
        <ul th>
            <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@s">Punisher</li>
            <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@s">Server</li>
            <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@s">Type</li>
            <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@m">Reason</li>
            <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@m">Comment</li>
            <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@m">Expired at</li>
        </ul>
        {% for punishment in player.punishments %}
            <ul>
                <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@s">
                    {{ punishments.punisher(punishment) }}
                </li>
                <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@s">
                    {{ punishments.server(punishment) }}
                </li>
                <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@s">
                    {{ punishments.type(punishment) }}
                </li>
                <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@m">{{ punishment.reason.title }}</li>
                <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@m">{{ punishment.comment }}</li>
                <li class="uk-width-1-6@m uk-width-1-6@s uk-visible@m">{{ punishments.expired(punishment) }}</li>
            </ul>
        {% endfor %}
    </div>
</div>
{% endblock %}
